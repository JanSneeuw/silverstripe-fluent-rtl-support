{"version":3,"sources":["fluent-rtl.js"],"names":["jQuery","entwine","$","setDirectionForLocale","currentLocale","cookie","config","window","ss","sections","find","next","name","fluentrtl","fluentRTLConfig","locales","length","dir","forEach","locale","code","removeClass","addClass","tinymce","i","editors","editorInstance","getElement","classList","contains","directionality","getBody","setAttribute","onmatch"],"mappings":"AAyEAA,OAxEAC,QAAA,KAAA,SAAAC,GAEA,IAiBAC,sBAAA,WACA,IAAAC,cAAAF,EAAAG,OAAA,oBACA,QAAA,IAAAD,cAAA,CACA,IAAAE,OApBA,WAEA,GAAAC,QACAA,OAAAC,IACAD,OAAAC,GAAAF,QACAC,OAAAC,GAAAF,OAAAG,SACA,CACA,IAAAH,OAAAC,OAAAC,GAAAF,OAAAG,SAAAC,KAAA,SAAAC,MACA,MAPA,qCAOAA,KAAAC,OAEA,GAAAN,OACA,OAAAA,OAAAO,cAGA,SAMAC,GAEA,QAAA,IAAAR,OAAAS,SAAA,IAAAT,OAAAS,QAAAC,OACA,OAGA,IAAAC,IAAA,MASA,GARAX,OAAAS,QAAAG,QAAA,SAAAC,QACAA,OAAAC,MAAAhB,gBACAa,IAAAE,OAAAF,OAIAf,EAAA,QAAAmB,YAAA,OAAAA,YAAA,OAAAC,SAAAL,KAEA,oBAAAM,QACA,IAAA,IAAAC,EAAA,EAAAA,EAAAD,QAAAE,QAAAT,OAAAQ,IAAA,CACA,IAAAE,eAAAH,QAAAE,QAAAD,GACAE,eAAAC,aAEAC,UAAAC,SAAA,6BAGAH,eAAAI,eAAAb,IACAS,eAAAK,UAAAC,aAAA,MAAAf,SAOAf,EAAA,wBAAAD,SACAgC,QAAA,WACA9B,2BAIAD,EAAA,gBAAAD,SACAgC,QAAA,WACA9B,2BAIAD,EAAA,4BAAAD,SACAgC,QAAA,WACA9B","file":"fluent-rtl.js","sourcesContent":["(function($) {\n\t$.entwine('ss', function($) {\n\t\t\n\t\tvar fluentRTLConfig = function() {\n\t\t\tvar section = 'SilverStripe\\\\Admin\\\\LeftAndMain';\n\t\t\tif (window\n\t\t\t\t&& window.ss\n\t\t\t    && window.ss.config\n\t\t\t    && window.ss.config.sections\n\t\t\t) {\n\t\t\t\tvar config = window.ss.config.sections.find(function (next) {\n\t\t\t\t\treturn next.name === section;\n\t\t\t\t});\n\t\t\t    if (config) {\n\t\t\t    \treturn config.fluentrtl || {};\n\t\t\t    }\n\t\t\t}\n\t\t\treturn {};\n\t\t};\t\t\n\t\t\n\t\tvar setDirectionForLocale = function() {\n\t\t\tvar currentLocale = $.cookie('FluentLocale_CMS');\n\t\t\tif (typeof currentLocale != 'undefined') {\n\t\t\t\tvar config = fluentRTLConfig();\n\t\t\t\t// Skip if no locales defined\n\t\t\t\tif (typeof config.locales === 'undefined' || config.locales.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// get direction\n\t\t\t\tvar dir = 'ltr';\n\t\t\t\tconfig.locales.forEach(function(locale) {\n\t\t\t\t\tif (locale.code == currentLocale) {\n\t\t\t\t\t\tdir = locale.dir;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// set class on html tag\n\t\t\t\t$('html').removeClass('ltr').removeClass('rtl').addClass(dir);\n\t\t\t\t// update tinymce config\n\t\t\t\tif(typeof tinymce != 'undefined') {\n\t\t\t\t\tfor (var i = 0; i < tinymce.editors.length; i++) {\n\t\t\t\t\t\tvar editorInstance = tinymce.editors[i];\n\t\t\t\t\t\tvar textArea = editorInstance.getElement();\n\t\t\t\t\t\t// check if editor is a localised field\n\t\t\t\t\t\tif (textArea.classList.contains('fluent__localised-field')) {\n\t\t\t\t\t\t\t// add separator\n\t\t\t\t\t\t\t// set field direction\n\t\t\t\t\t\t\teditorInstance.directionality = dir;\n\t\t\t\t\t\t\teditorInstance.getBody().setAttribute('dir', dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t$(\".cms-fluent-selector\").entwine({\n\t\t\tonmatch: function() {\n\t\t\t\tsetDirectionForLocale();\n\t\t\t}\n\t\t});\n\t\t\n\t\t$(\".cms-content\").entwine({\n\t\t\tonmatch: function() {\n\t\t\t\tsetDirectionForLocale();\n\t\t\t}\n\t\t});\n\t\t\n\t\t$(\".field.htmleditor iframe\").entwine({\n\t\t\tonmatch: function() {\n\t\t\t\tsetDirectionForLocale();\n\t\t\t}\n\t\t});\n\t\t\n\t});\n})(jQuery);"]}